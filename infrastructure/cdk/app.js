#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const ai_compliance_platform_stack_1 = require("./src/ai-compliance-platform-stack");
const database_stack_1 = require("./src/database-stack");
const api_stack_1 = require("./src/api-stack");
const lambda_stack_1 = require("./src/lambda-stack");
const storage_stack_1 = require("./src/storage-stack");
const security_stack_1 = require("./src/security-stack");
const monitoring_stack_1 = require("./src/monitoring-stack");
const integration_stack_1 = require("./src/integration-stack");
const app = new cdk.App();
// Get environment from context
const environment = app.node.tryGetContext('environment') || 'dev';
const region = app.node.tryGetContext('region') || 'us-east-1';
// Environment-specific configuration
const config = {
    dev: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: region,
        environment: 'dev',
        stage: 'dev',
        prefix: 'ai-compliance'
    },
    staging: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: region,
        environment: 'staging',
        stage: 'staging',
        prefix: 'ai-compliance-staging'
    },
    prod: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: region,
        environment: 'prod',
        stage: 'prod',
        prefix: 'ai-compliance-prod'
    }
};
const envConfig = config[environment] || config.dev;
// Core stack dependencies
const coreStack = new ai_compliance_platform_stack_1.AiCompliancePlatformStack(app, `${envConfig.prefix}-core`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Core Platform Stack'
});
// Database infrastructure
const databaseStack = new database_stack_1.DatabaseStack(app, `${envConfig.prefix}-database`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Database Stack'
});
// Security infrastructure
const securityStack = new security_stack_1.SecurityStack(app, `${envConfig.prefix}-security`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Security Stack'
});
// Storage infrastructure
const storageStack = new storage_stack_1.StorageStack(app, `${envConfig.prefix}-storage`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Storage Stack'
});
// Lambda functions
const lambdaStack = new lambda_stack_1.LambdaStack(app, `${envConfig.prefix}-lambda`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Lambda Stack'
});
// API Gateway
const apiStack = new api_stack_1.ApiStack(app, `${envConfig.prefix}-api`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd API Stack'
});
// Monitoring and observability
const monitoringStack = new monitoring_stack_1.MonitoringStack(app, `${envConfig.prefix}-monitoring`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Monitoring Stack'
});
// Integrations (GitHub, Slack, etc.)
const integrationStack = new integration_stack_1.IntegrationStack(app, `${envConfig.prefix}-integration`, {
    env: { account: envConfig.account, region: envConfig.region },
    config: envConfig,
    description: 'AI Compliance Shepherd Integration Stack'
});
// Stack dependency ordering
// Define stack dependencies
databaseStack.addDependency(coreStack);
securityStack.addDependency(coreStack);
storageStack.addDependency(securityStack);
lambdaStack.addDependency(databaseStack);
lambdaStack.addDependency(securityStack);
lambdaStack.addDependency(storageStack);
apiStack.addDependency(lambdaStack);
apiStack.addDependency(securityStack);
monitoringStack.addDependency(lambdaStack);
monitoringStack.addDependency(apiStack);
integrationStack.addDependency(lambdaStack);
integrationStack.addDependency(securityStack);
// Tags for all stacks
cdk.Tags.of(app).add('Project', 'AI-Compliance-Shepherd');
cdk.Tags.of(app).add('Environment', envConfig.environment);
cdk.Tags.of(app).add('Stage', envConfig.stage);
cdk.Tags.of(app).add('ManagedBy', 'CDK');
// Output deployment information
new cdk.CfnOutput(coreStack, 'DeploymentInfo', {
    value: JSON.stringify({
        environment: envConfig.environment,
        region: envConfig.region,
        deploymentTime: new Date().toISOString(),
        stackDependencies: {
            core: coreStack.stackName,
            database: databaseStack.stackName,
            security: securityStack.stackName,
            storage: storageStack.stackName,
            lambda: lambdaStack.stackName,
            api: apiStack.stackName,
            monitoring: monitoringStack.stackName,
            integration: integrationStack.stackName
        }
    }),
    description: 'Deployment configuration and stack information'
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMscUZBQStFO0FBQy9FLHlEQUFxRDtBQUNyRCwrQ0FBMkM7QUFDM0MscURBQWlEO0FBQ2pELHVEQUFtRDtBQUNuRCx5REFBcUQ7QUFDckQsNkRBQXlEO0FBQ3pELCtEQUEyRDtBQUUzRCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUUxQiwrQkFBK0I7QUFDL0IsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDO0FBQ25FLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLFdBQVcsQ0FBQztBQUUvRCxxQ0FBcUM7QUFDckMsTUFBTSxNQUFNLEdBQUc7SUFDYixHQUFHLEVBQUU7UUFDSCxPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUI7UUFDeEMsTUFBTSxFQUFFLE1BQU07UUFDZCxXQUFXLEVBQUUsS0FBSztRQUNsQixLQUFLLEVBQUUsS0FBSztRQUNaLE1BQU0sRUFBRSxlQUFlO0tBQ3hCO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CO1FBQ3hDLE1BQU0sRUFBRSxNQUFNO1FBQ2QsV0FBVyxFQUFFLFNBQVM7UUFDdEIsS0FBSyxFQUFFLFNBQVM7UUFDaEIsTUFBTSxFQUFFLHVCQUF1QjtLQUNoQztJQUNELElBQUksRUFBRTtRQUNKLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtRQUN4QyxNQUFNLEVBQUUsTUFBTTtRQUNkLFdBQVcsRUFBRSxNQUFNO1FBQ25CLEtBQUssRUFBRSxNQUFNO1FBQ2IsTUFBTSxFQUFFLG9C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QUcsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQy9DLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFFekMsZ0NBQWdDO0FBQ2hDLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsZ0JBQWdCLEVBQUU7SUFDN0MsS0FBSyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDcEIsV0FBVyxFQUFFLFNBQVMsQ0FBQyxXQUFXO1FBQ2xDLE1BQU0sRUFBRSxTQUFTLENBQUMsTUFBTTtRQUN4QixjQUFjLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7UUFDeEMsaUJBQWlCLEVBQUU7WUFDakIsSUFBSSxFQUFFLFNBQVMsQ0FBQyxTQUFTO1lBQ3pCLFFBQVEsRUFBRSxhQUFhLENBQUMsU0FBUztZQUNqQyxRQUFRLEVBQUUsYUFBYSxDQUFDLFNBQVM7WUFDakMsT0FBTyxFQUFFLFlBQVksQ0FBQyxTQUFTO1lBQy9CLE1BQU0sRUFBRSxXQUFXLENBQUMsU0FBUztZQUM3QixHQUFHLEVBQUUsUUFBUSxDQUFDLFNBQVM7WUFDdkIsVUFBVSxFQUFFLGVBQWUsQ0FBQyxTQUFTO1lBQ3JDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxTQUFTO1NBQ3hDO0tBQ0YsQ0FBQztJQUNGLFdBQVcsRUFBRSxnREFBZ0Q7Q0FDOUQsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxyXG5cclxuaW1wb3J0ICdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInO1xyXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xyXG5pbXBvcnQgeyBBaUNvbXBsaWFuY2VQbGF0Zm9ybVN0YWNrIH0gZnJvbSAnLi9zcmMvYWktY29tcGxpYW5jZS1wbGF0Zm9ybS1zdGFjayc7XHJcbmltcG9ydCB7IERhdGFiYXNlU3RhY2sgfSBmcm9tICcuL3NyYy9kYXRhYmFzZS1zdGFjayc7XHJcbmltcG9ydCB7IEFwaVN0YWNrIH0gZnJvbSAnLi9zcmMvYXBpLXN0YWNrJztcclxuaW1wb3J0IHsgTGFtYmRhU3RhY2sgfSBmcm9tICcuL3NyYy9sYW1iZGEtc3RhY2snO1xyXG5pbXBvcnQgeyBTdG9yYWdlU3RhY2sgfSBmcm9tICcuL3NyYy9zdG9yYWdlLXN0YWNrJztcclxuaW1wb3J0IHsgU2VjdXJpdHlTdGFjayB9IGZyb20gJy4vc3JjL3NlY3VyaXR5LXN0YWNrJztcclxuaW1wb3J0IHsgTW9uaXRvcmluZ1N0YWNrIH0gZnJvbSAnLi9zcmMvbW9uaXRvcmluZy1zdGFjayc7XHJcbmltcG9ydCB7IEludGVncmF0aW9uU3RhY2sgfSBmcm9tICcuL3NyYy9pbnRlZ3JhdGlvbi1zdGFjayc7XHJcblxyXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xyXG5cclxuLy8gR2V0IGVudmlyb25tZW50IGZyb20gY29udGV4dFxyXG5jb25zdCBlbnZpcm9ubWVudCA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ2Vudmlyb25tZW50JykgfHwgJ2Rldic7XHJcbmNvbnN0IHJlZ2lvbiA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ3JlZ2lvbicpIHx8ICd1cy1lYXN0LTEnO1xyXG5cclxuLy8gRW52aXJvbm1lbnQtc3BlY2lmaWMgY29uZmlndXJhdGlvblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZGV2OiB7XHJcbiAgICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxyXG4gICAgcmVnaW9uOiByZWdpb24sXHJcbiAgICBlbnZpcm9ubWVudDogJ2RldicsXHJcbiAgICBzdGFnZTogJ2RldicsXHJcbiAgICBwcmVmaXg6ICdhaS1jb21wbGlhbmNlJ1xyXG4gIH0sXHJcbiAgc3RhZ2luZzoge1xyXG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcclxuICAgIHJlZ2lvbjogcmVnaW9uLFxyXG4gICAgZW52aXJvbm1lbnQ6ICdzdGFnaW5nJyxcclxuICAgIHN0YWdlOiAnc3RhZ2luZycsXHJcbiAgICBwcmVmaXg6ICdhaS1jb21wbGlhbmNlLXN0YWdpbmcnXHJcbiAgfSxcclxuICBwcm9kOiB7XHJcbiAgICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxyXG4gICAgcmVnaW9uOiByZWdpb24sXHJcbiAgICBlbnZpcm9ubWVudDogJ3Byb2QnLFxyXG4gICAgc3RhZ2U6ICdwcm9kJyxcclxuICAgIHByZWZpeDogJ2FpLWNvbXBsaWFuY2UtcHJvZCdcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBlbnZDb25maWcgPSBjb25maWdbZW52aXJvbm1lbnQgYXMga2V5b2YgdHlwZW9mIGNvbmZpZ10gfHwgY29uZmlnLmRldjtcclxuXHJcbi8vIENvcmUgc3RhY2sgZGVwZW5kZW5jaWVzXHJcbmNvbnN0IGNvcmVTdGFjayA9IG5ldyBBaUNvbXBsaWFuY2VQbGF0Zm9ybVN0YWNrKGFwcCwgYCR7ZW52Q29uZmlnLnByZWZpeH0tY29yZWAsIHtcclxuICBlbnY6IHsgYWNjb3VudDogZW52Q29uZmlnLmFjY291bnQsIHJlZ2lvbjogZW52Q29uZmlnLnJlZ2lvbiB9LFxyXG4gIGNvbmZpZzogZW52Q29uZmlnLFxyXG4gIGRlc2NyaXB0aW9uOiAnQUkgQ29tcGxpYW5jZSBTaGVwaGVyZCBDb3JlIFBsYXRmb3JtIFN0YWNrJ1xyXG59KTtcclxuXHJcbi8vIERhdGFiYXNlIGluZnJhc3RydWN0dXJlXHJcbmNvbnN0IGRhdGFiYXNlU3RhY2sgPSBuZXcgRGF0YWJhc2VTdGFjayhhcHAsIGAke2VudkNvbmZpZy5wcmVmaXh9LWRhdGFiYXNlYCwge1xyXG4gIGVudjogeyBhY2NvdW50OiBlbnZDb25maWcuYWNjb3VudCwgcmVnaW9uOiBlbnZDb25maWcucmVnaW9uIH0sXHJcbiAgY29uZmlnOiBlbnZDb25maWcsXHJcbiAgZGVzY3JpcHRpb246ICdBSSBDb21wbGlhbmNlIFNoZXBoZXJkIERhdGFiYXNlIFN0YWNrJ1xyXG59KTtcclxuXHJcbi8vIFNlY3VyaXR5IGluZnJhc3RydWN0dXJlXHJcbmNvbnN0IHNlY3VyaXR5U3RhY2sgPSBuZXcgU2VjdXJpdHlTdGFjayhhcHAsIGAke2VudkNvbmZpZy5wcmVmaXh9LXNlY3VyaXR5YCwge1xyXG4gIGVudjogeyBhY2NvdW50OiBlbnZDb25maWcuYWNjb3VudCwgcmVnaW9uOiBlbnZDb25maWcucmVnaW9uIH0sXHJcbiAgY29uZmlnOiBlbnZDb25maWcsXHJcbiAgZGVzY3JpcHRpb246ICdBSSBDb21wbGlhbmNlIFNoZXBoZXJkIFNlY3VyaXR5IFN0YWNrJ1xyXG59KTtcclxuXHJcbi8vIFN0b3JhZ2UgaW5mcmFzdHJ1Y3R1cmVcclxuY29uc3Qgc3RvcmFnZVN0YWNrID0gbmV3IFN0b3JhZ2VTdGFjayhhcHAsIGAke2VudkNvbmZpZy5wcmVmaXh9LXN0b3JhZ2VgLCB7XHJcbiAgZW52OiB7IGFjY291bnQ6IGVudkNvbmZpZy5hY2NvdW50LCByZWdpb246IGVudkNvbmZpZy5yZWdpb24gfSxcclxuICBjb25maWc6IGVudkNvbmZpZyxcclxuICBkZXNjcmlwdGlvbjogJ0FJIENvbXBsaWFuY2UgU2hlcGhlcmQgU3RvcmFnZSBTdGFjaydcclxufSk7XHJcblxyXG4vLyBMYW1iZGEgZnVuY3Rpb25zXHJcbmNvbnN0IGxhbWJkYVN0YWNrID0gbmV3IExhbWJkYVN0YWNrKGFwcCwgYCR7ZW52Q29uZmlnLnByZWZpeH0tbGFtYmRhYCwge1xyXG4gIGVudjogeyBhY2NvdW50OiBlbnZDb25maWcuYWNjb3VudCwgcmVnaW9uOiBlbnZDb25maWcucmVnaW9uIH0sXHJcbiAgY29uZmlnOiBlbnZDb25maWcsXHJcbiAgZGVzY3JpcHRpb246ICdBSSBDb21wbGlhbmNlIFNoZXBoZXJkIExhbWJkYSBTdGFjaydcclxufSk7XHJcblxyXG4vLyBBUEkgR2F0ZXdheVxyXG5jb25zdCBhcGlTdGFjayA9IG5ldyBBcGlTdGFjayhhcHAsIGAke2VudkNvbmZpZy5wcmVmaXh9LWFwaWAsIHtcclxuICBlbnY6IHsgYWNjb3VudDogZW52Q29uZmlnLmFjY291bnQsIHJlZ2lvbjogZW52Q29uZmlnLnJlZ2lvbiB9LFxyXG4gIGNvbmZpZzogZW52Q29uZmlnLFxyXG4gIGRlc2NyaXB0aW9uOiAnQUkgQ29tcGxpYW5jZSBTaGVwaGVyZCBBUEkgU3RhY2snXHJcbn0pO1xyXG5cclxuLy8gTW9uaXRvcmluZyBhbmQgb2JzZXJ2YWJpbGl0eVxyXG5jb25zdCBtb25pdG9yaW5nU3RhY2sgPSBuZXcgTW9uaXRvcmluZ1N0YWNrKGFwcCwgYCR7ZW52Q29uZmlnLnByZWZpeH0tbW9uaXRvcmluZ2AsIHtcclxuICBlbnY6IHsgYWNjb3VudDogZW52Q29uZmlnLmFjY291bnQsIHJlZ2lvbjogZW52Q29uZmlnLnJlZ2lvbiB9LFxyXG4gIGNvbmZpZzogZW52Q29uZmlnLFxyXG4gIGRlc2NyaXB0aW9uOiAnQUkgQ29tcGxpYW5jZSBTaGVwaGVyZCBNb25pdG9yaW5nIFN0YWNrJ1xyXG59KTtcclxuXHJcbi8vIEludGVncmF0aW9ucyAoR2l0SHViLCBTbGFjaywgZXRjLilcclxuY29uc3QgaW50ZWdyYXRpb25TdGFjayA9IG5ldyBJbnRlZ3JhdGlvblN0YWNrKGFwcCwgYCR7ZW52Q29uZmlnLnByZWZpeH0taW50ZWdyYXRpb25gLCB7XHJcbiAgZW52OiB7IGFjY291bnQ6IGVudkNvbmZpZy5hY2NvdW50LCByZWdpb246IGVudkNvbmZpZy5yZWdpb24gfSxcclxuICBjb25maWc6IGVudkNvbmZpZyxcclxuICBkZXNjcmlwdGlvbjogJ0FJIENvbXBsaWFuY2UgU2hlcGhlcmQgSW50ZWdyYXRpb24gU3RhY2snXHJcbn0pO1xyXG5cclxuLy8gU3RhY2sgZGVwZW5kZW5jeSBvcmRlcmluZ1xyXG5cclxuLy8gRGVmaW5lIHN0YWNrIGRlcGVuZGVuY2llc1xyXG5kYXRhYmFzZVN0YWNrLmFkZERlcGVuZGVuY3koY29yZVN0YWNrKTtcclxuc2VjdXJpdHlTdGFjay5hZGREZXBlbmRlbmN5KGNvcmVTdGFjayk7XHJcbnN0b3JhZ2VTdGFjay5hZGREZXBlbmRlbmN5KHNlY3VyaXR5U3RhY2spO1xyXG5sYW1iZGFTdGFjay5hZGREZXBlbmRlbmN5KGRhdGFiYXNlU3RhY2spO1xyXG5sYW1iZGFTdGFjay5hZGREZXBlbmRlbmN5KHNlY3VyaXR5U3RhY2spO1xyXG5sYW1iZGFTdGFjay5hZGREZXBlbmRlbmN5KHN0b3JhZ2VTdGFjayk7XHJcbmFwaVN0YWNrLmFkZERlcGVuZGVuY3kobGFtYmRhU3RhY2spO1xyXG5hcGlTdGFjay5hZGREZXBlbmRlbmN5KHNlY3VyaXR5U3RhY2spO1xyXG5tb25pdG9yaW5nU3RhY2suYWRkRGVwZW5kZW5jeShsYW1iZGFTdGFjayk7XHJcbm1vbml0b3JpbmdTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcclxuaW50ZWdyYXRpb25TdGFjay5hZGREZXBlbmRlbmN5KGxhbWJkYVN0YWNrKTtcclxuaW50ZWdyYXRpb25TdGFjay5hZGREZXBlbmRlbmN5KHNlY3VyaXR5U3RhY2spO1xyXG5cclxuLy8gVGFncyBmb3IgYWxsIHN0YWNrc1xyXG5jZGsuVGFncy5vZihhcHApLmFkZCgnUHJvamVjdCcsICdBSS1Db21wbGlhbmNlLVNoZXBoZXJkJyk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdFbnZpcm9ubWVudCcsIGVudkNvbmZpZy5lbnZpcm9ubWVudCk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdTdGFnZScsIGVudkNvbmZpZy5zdGFnZSk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdNYW5hZ2VkQnknLCAnQ0RLJyk7XHJcblxyXG4vLyBPdXRwdXQgZGVwbG95bWVudCBpbmZvcm1hdGlvblxyXG5uZXcgY2RrLkNmbk91dHB1dChjb3JlU3RhY2ssICdEZXBsb3ltZW50SW5mbycsIHtcclxuICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgZW52aXJvbm1lbnQ6IGVudkNvbmZpZy5lbnZpcm9ubWVudCxcclxuICAgIHJlZ2lvbjogZW52Q29uZmlnLnJlZ2lvbixcclxuICAgIGRlcGxveW1lbnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICBzdGFja0RlcGVuZGVuY2llczoge1xyXG4gICAgICBjb3JlOiBjb3JlU3RhY2suc3RhY2tOYW1lLFxyXG4gICAgICBkYXRhYmFzZTogZGF0YWJhc2VTdGFjay5zdGFja05hbWUsXHJcbiAgICAgIHNlY3VyaXR5OiBzZWN1cml0eVN0YWNrLnN0YWNrTmFtZSxcclxuICAgICAgc3RvcmFnZTogc3RvcmFnZVN0YWNrLnN0YWNrTmFtZSxcclxuICAgICAgbGFtYmRhOiBsYW1iZGFTdGFjay5zdGFja05hbWUsXHJcbiAgICAgIGFwaTogYXBpU3RhY2suc3RhY2tOYW1lLFxyXG4gICAgICBtb25pdG9yaW5nOiBtb25pdG9yaW5nU3RhY2suc3RhY2tOYW1lLFxyXG4gICAgICBpbnRlZ3JhdGlvbjogaW50ZWdyYXRpb25TdGFjay5zdGFja05hbWVcclxuICAgIH1cclxuICB9KSxcclxuICBkZXNjcmlwdGlvbjogJ0RlcGxveW1lbnQgY29uZmlndXJhdGlvbiBhbmQgc3RhY2sgaW5mb3JtYXRpb24nXHJcbn0pO1xyXG4iXX0=